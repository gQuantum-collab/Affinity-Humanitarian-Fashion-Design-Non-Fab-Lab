#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Enforce sovereign IP marks
python3 ops/ipmarks/runner.py

# Abort if runner made changes
if ! git diff --quiet; then
  echo "❌ Sovereign marks runner made changes. Commit them before retrying."
  exit 1
fi

echo "✅ IP marks enforced"

# Block inline styles in JSX/TSX (returns non-zero if found)
if git diff --cached --name-only | grep -E '\.(tsx|jsx)$' | xargs -r grep -n "style=\"" > /dev/null 2>&1 ; then
  echo "❌ Inline style detected in JSX/TSX. Use className/Tailwind instead."
  exit 1
fi

echo "✅ No inline style attributes found"
